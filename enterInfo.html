<!DOCTYPE html>
<html>
<head lang="en">
    <title>正在建设中</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="css/materialize.css" />
    <link rel="stylesheet" href="css/style.css" />

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script type="text/javascript" src="script/html5shiv.js"></script>
    <script type="text/javascript" src="script/respond.min.js"></script>
    <![endif]-->
</head>
<body>

<nav class="white">
    <div class="nav-wrapper">
        <a href="index.html" class="brand-logo">物流系统</a>
        <ul id="nav-mobile" class="right hide-on-med-and-down">
            <li class="black-text not" id="timeY">我是时间</li>
            <li><a href="index.html">本站首页</a></li>
            <li><a href="dongtai.html">物流动态</a></li>
            <li><a href="zhishi.html">物流知识</a></li>
            <li><a href="goodsInfo.html">货物信息</a></li>
            <li><a href="carInfo.html">车辆信息</a></li>
            <li><a href="enterInfo.html">企业信息</a></li>
            <li><a href="badges.html">辅助工具</a></li>
            <li><a href="javascript:;" id="logout">退出</a></li>
            <li><a href="mag.html">后台管理</a></li>
        </ul>
    </div>
</nav>

    <table class="hoverable">
        <thead>
        <tr>
            <th>ID</th>
            <th>企业种类</th>
            <th>名称</th>
            <th>经营范围</th>
            <th>地区</th>
            <th>地址</th>
            <th>电话</th>
            <th>联系人</th>
            <th>手机</th>
            <th>传真</th>
            <th>邮箱</th>
            <th>网址</th>
            <th>简介</th>
            <th>发行日期</th>
            <th>操作</th>
        </tr>
        </thead>

        <tbody>
        <tr>
            <td>1</td>
            <td>来嫖</td>
            <td>你来嫖公司</td>
            <td>经营妹纸</td>
            <td>全国各地</td>
            <td>地球</td>
            <td>10086</td>
            <td>老嫖客</td>
            <td>100010</td>
            <td>XXXX</td>
            <td>XXX@XXX.XXX</td>
            <td>nilaipiao.com</td>
            <td>是嫖客就来</td>
            <td>就是现在</td>
            <td><a class="waves-effect waves-light blue btn small modal-trigger" style="height:36px;margin:0 10px 0 0;" id="1" onclick="getId(this.id);" href="#info" >修改</a><a class="waves-effect waves-light red btn small" style="height:36px;" onclick="delInfo();">删除</a></td>
        </tr>
        </tbody>
    </table>


<div id="info" class="modal" >
    <div class="modal-content">
        <h4>详细信息</h4>
        <div class="row">
            <div class="col s12">
                <div class="row">
                    <form class="col s12" id="enterInfo">
                        <div class="row">
                            <div class="input-field col s12">
                                <input placeholder="请输入企业类型" id="EnterpriseSort" name="EnterpriseSort" type="text" class="validate" />
                                <label for="EnterpriseSort">企业类型</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="input-field col s12">
                                <input placeholder="请输入企业名称" id="EnterpriseName" name="EnterpriseName" type="text" class="validate" />
                                <label for="EnterpriseName">企业名称</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="input-field col s12">
                                <input placeholder="请输入Operation？" id="Operation" name="Operation" type="text" class="validate" />
                                <label for="Operation">Operation？</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="input-field col s12">
                                <input placeholder="请输入工作地区" id="WorkArea" name="WorkArea" type="text" class="validate" />
                                <label for="WorkArea">工作地区</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="input-field col s12">
                                <input placeholder="请输入使用时间" id="Address" name="Address" type="text" class="validate" />
                                <label for="Address">地址</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="input-field col s12">
                                <input placeholder="请输入电话" id="Phone" name="Phone" type="text" class="validate" />
                                <label for="Phone">电话</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="input-field col s12">
                                <input placeholder="请输入手机" id="HandSet" name="HandSet" type="text" class="validate" />
                                <label for="HandSet">手机</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="input-field col s12">
                                <input placeholder="请输入传真" id="Fax" name="Fax" type="text" class="validate" />
                                <label for="Fax">传真</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="input-field col s12">
                                <input placeholder="请输入邮箱" id="Email" name="Email" type="text" class="validate" />
                                <label for="Email">邮箱</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="input-field col s12">
                                <input placeholder="请输入网址" id="Http" name="Http" type="text" class="validate" />
                                <label for="Http">网址</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="input-field col s12">
                                <input placeholder="请输入简介" id="Intro" name="Intro" type="text" class="validate" />
                                <label for="Intro">简介</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="input-field col s12">
                                <input placeholder="请输入联系人" id="LinkMan" name="LinkMan" type="text" class="validate" />
                                <label for="LinkMan">联系人</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="input-field col s12">
                                <input placeholder="请输入发货时间" id="IssueDate" name="IssueDate" type="text" class="validate" />
                                <label for="IssueDate">发货时间</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="input-field col s12">
                                <input placeholder="请输入用户姓名" id="UserName" name="UserName" type="text" class="validate" />
                                <label for="UserName">用户姓名</label>
                            </div>
                        </div>
                    </form>
                    <button class="waves-effect waves-light red btn small" id="sub">提交</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">关闭</a>
    </div>
</div>

<script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
<script type="text/javascript" src="js/materialize.min.js"></script>
<script type="text/javascript" src="js/init.js"></script>
<script type="text/javascript" src="js/getCookie.js"></script>
<script>
    $(document).ready(function() {
                $('.parallax').parallax();
                var date = new Date();
                var month = date.getMonth() + 1;
                var day = ["星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六"][date.getDay()];
                $('#timeY').text(date.getFullYear() + "年" + month + "月" + date.getDate() + "号" + day);
                $.ajax({
                    url:"json.php",
                    data:"",
                    dataType:"json",
                    method:"GET",
                    success:function(json){
                        loadInfo(json);
                    },
                    error:function(){
                        alert('请求失败');
                    }
                });
            }
    );
    function loadInfo(json){
        for(var i=0;i<json.length;i++){
            var s = i+1;
            $('tbody').append(function(){
                var str = "<tr>" +
                        "<td>"+s+"</td>" +
                        "<td>"+json.EnterpriseSort+"</td>" +
                        "<td>"+json.EnterpriseName+"</td>" +
                        "<td>"+json.Operation+"</td>" +
                        "<td>"+json.WorkArea+"</td>" +
                        "<td>"+json.Address+"</td>" +
                        "<td>"+json.Phone+"</td>" +
                        "<td>"+json.LinkMan+"</td>" +
                        "<td>"+json.HandSet+"</td" +
                        "><td>"+json.Fax+"</td>" +
                        "<td>"+json.Email+"</td>" +
                        "<td>"+json.Http+"</td>" +
                        "<td>"+json.IssueDate+"</td>" +
                        "<td>"+json.UserName+"</td>" +
                        "<td><a class=\"waves-effect waves-light blue btn small modal-trigger\" style=\"height:36px;margin:0 10px 0 0;\" id=\""+s+"\" onclick=\"getId(this.id);\" href=\"#info\" >修改</a><a class=\"waves-effect waves-light red btn small\" style=\"height:36px;\" onclick=\"delInfo();\">删除</a></td></tr>";
                return str;
            });

        }
        $('.modal-trigger').leanModal();
    }
    $('.modal-trigger').leanModal();
    function getId(id){
        window.gid = id;
        change();
    }

    function change(){
        $.ajax({
            url:"json.php",
            data:$('#enterInfo').serialize(),
            dataType:"json",
            method:"POST",
            success:function(data){
                if(data.status == 200){
                    detInfo(data);
                }
            },
            error:function(){
                alert('请求失败');
            }
        });
    }
    function detInfo(data){
        $("#EnterpriseSort").val(data.EnterpriseSort);
        $("#EnterpriseName").val(data.EnterpriseName);
        $("#Operation").val(data.Operation);
        $("#WorkArea").val(data.WorkArea);
        $("#Address").val(data.Address);
        $("#Phone").val(data.Phone);
        $("#LinkMan").val(data.LinkMan);
        $("#HandSet").val(data.HandSet);
        $("#Fax").val(data.Fax);
        $("#Email").val(data.Email);
        $("#Http").val(data.Http);
        $("#Intro").val(data.Intro);
        $("#IssueDate").val(data.IssueDate);
        $("#UserName").val(data.UserName);

    }
    function delInfo(){
        $.ajax({
            url:"json.php",
            data:"id="+window.gid,
            dataType:"json",
            method:"post",
            success:function(data){
                if(data == 200){
                    alert('删除成功！');
                }
            },
            error:function(){
                return false;
            }
        });
    }
</script>
<script type="text/javascript" src="js/logout.js"></script>
</body>
</html>